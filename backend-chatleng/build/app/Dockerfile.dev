FROM node:20-alpine

WORKDIR /app

COPY . .

COPY package.json yarn.lock ./
RUN yarn install --frozen-lockfile

RUN install -m 755 ./build/scripts/entrypoint.sh /bin/entrypoint.sh

EXPOSE 3000

HEALTHCHECK --interval=60s CMD curl -f http://localhost:3000/api/docker-healthcheck || exit 1
ENTRYPOINT ["/bin/entrypoint.sh"]


CMD ["yarn", "dev"]